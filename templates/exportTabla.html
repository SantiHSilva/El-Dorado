{% load filter%}
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Resultados: {{date}}</title>
    <link rel="icon" href="https://virtual.unipiloto.edu.co/pluginfile.php/1/theme_unipiloto/favicon/1663786604/favicon.ico" />
    <meta name='viewport' content='width=device-width, initial-scale=1'>
</head>
<style>
    .fecha {
        text-align: right;
    }
    .logo{
        position: fixed;
        text-align: center;
    }
    .center{
        text-align: center;
        font-size: 15px;
        font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;
    }
    .roundedTable th, td {
        text-decoration: none;
        font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;
        color: rgb(0, 0, 0);
        padding: 1px;
        text-align:center;
    }
</style>
<body>
    <p class="fecha">Fecha de creaci칩n: {{ date }}, {{time}}</p>
    <div>
        <img src="{{path}}\logo.png" width="50" height="50" class="logo"><p class="center">El Dorado</p>
    </div>
    <hr>
    <H2 class="center">
        Tabla General
    </H2>
    <table border="1" class="roundedTable">
        <thead>
            <th>ID</th>
            <th>Nombre</th>
            <th>Proveedor</th>
            <th>Contacto</th>
            <th>Cantidad</th>
            <th>Categoria</th>
            <th>Peso/u</th>
            <th>Unidad de proveedor</th>
            <th>Fecha de modificaci칩n</th>
            <th>Fecha de vencimiento</th>
            <th>Stock Min</th>
            <th>Stock Max</th>
        </thead>
        <tbody>
            {% for informacion in informacion %}
            <tr>
                <td>{{informacion.id}}</td>
                <td>{{informacion.nombre_descripcion}}</td>
                <td>{{informacion.proveedor}}</td>
                <td>{{informacion.numero_proveedor}}</td>
                <td>{{informacion.cantidad_productos}}</td>
                <td>{{informacion.categoria_producto | transform_categoria}}</td>
                <td>{% conversion_g_a_kg informacion.peso_unidad informacion.unidades informacion.categoria_producto %}</td>
                <td>{{informacion.unidades | transform_unidades}}</td>
                <td>{{informacion.fecha_modificacion}}</td>
                {{informacion.fecha_vencimiento|calcular_vencimiento}}
                <td>{{informacion.stock_maximo}}</td>
                <td>{{informacion.stock_minimo}}</td>
            </tr>
            {% endfor %}
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>{{suma_cantidad}}</td>
                <td>&nbsp;</td>
                <td>{{suma_peso}}kg</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
                <td>&nbsp;</td>
        </tbody>
    </table>

    <h2 class="center">An치lisis de datos</h2>

    <table border="1" class="roundedTable">
        <thead>
            <th>Total productos</th>
            <th>Mayor cantidad de los productos: {{max}}</th>
            <th>Menor cantidad de los productos: {{min}}</th>
            <th>Producto(s) tipo alimentos: {{all_cat1|length}}</th>
            <th>Producto(s) tipo bebidas: {{all_cat2|length}}</th>
            <th>Producto(s) tipo limpieza: {{all_cat3|length}}</th>
            <th>Producto(s) tipo "otros": {{all_cat4|length}}</th>
        </thead>
        <tbody>
            <tr>
                <td>
                    {{total}} productos
                </td>
            
                <td>
                    {% for i in maxinfo %}
                    <p>
                        {{i.nombre_descripcion}}
                    </p>
                    {% endfor %}
                </td>

                <td>
                    {% for mininfo in mininfo %}
                    <p>
                        {{mininfo.nombre_descripcion}}
                    </p>
                    {% endfor %}
                </td>
                
                <td>
                        <p>
                            {% for all_cat1 in all_cat1 %} {{all_cat1.nombre_descripcion}}, {% endfor %}
                        </p>
                </td>
                
                <td>
                        <p>
                            {% for all_cat1 in all_cat2 %} {{all_cat1.nombre_descripcion}}, {% endfor %}
                        </p>
                </td>
                
                <td>
                        <p>
                            {% for all_cat1 in all_cat3 %} {{all_cat1.nombre_descripcion}}, {% endfor %}
                        </p>
                </td>
                
                <td>
                        <p>
                            {% for all_cat1 in all_cat4 %} {{all_cat1.nombre_descripcion}}, {% endfor %}
                        </p>
                </td>
                
            </tr>
        </tbody>
    </table>
    <table border="1" class="roundedTable">
        <thead>
            <th>Productos a vencer: {{por_caducar | length}}</th>
            <th>Productos vencidos: {{vencidos | length}}</th>
        </thead>
        <tbody>
            <tr>
                <td>
                    {% for i in por_caducar %}
                        <p>{{i}}</p>
                    {% endfor %}
                </td>
                <td>

                    {% for i in vencidos %}
                    <p>{{i}}</p>
                    {% endfor %}
                </td>
            </tr>
        </tbody>
    </table>
    <h2  class="center">Gr치fico de cantidades de acuerdo a la categoria</h2>
    <img src="{{path}}\grafico.png" width="250" height="250" class="logo"><p class="center">
    </body>
</html>


